"use strict";(self.webpackChunkfactura_proyecto=self.webpackChunkfactura_proyecto||[]).push([[370],{9370:function(e,a,t){t.r(a);var s=t(885),o=t(2791),l=(t(6546),t(9683)),n=t(1899),r=t(887),c=t(6747),i=t(184);a.default=function(){var e,a,t,d,u,m=(0,n.I0)(),h=(0,n.v9)((function(e){return e.factura})),x=h.datosGenerales,v=h.facturas,f=h.loading,b=(0,n.v9)((function(e){return e.ui})).isLoading,j=(0,o.useState)({years:[],labels:[]}),p=(0,s.Z)(j,2),g=p[0],y=p[1];(0,o.useEffect)((function(){v.length>0&&m((0,r.QK)())}),[m,v]);var N=(0,o.useCallback)((function(){if(null!==x&&void 0!==x&&x.yearMonth){var e={labels:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],years:[]};null===x||void 0===x||x.yearMonth.forEach((function(a){var t,s;(e.years.includes(a.year)||e.years.push(a.year),e["".concat(a.year)])?e["".concat(a.year)].push({x:null===e||void 0===e||null===(t=e.labels)||void 0===t?void 0:t[a.month-1],y:a.totalPrice,order:a.month}):e["".concat(a.year)]=[{x:null===e||void 0===e||null===(s=e.labels)||void 0===s?void 0:s[a.month-1],y:a.totalPrice,order:a.month}];e["".concat(a.year)].sort((function(e,a){return e.order-a.order}))})),y(e)}}),[x]);(0,o.useEffect)((function(){N()}),[N]);return(0,i.jsxs)("div",{className:"container mt-5 text-white",children:[(0,i.jsx)("h1",{className:"animate__animated animate__bounce animate__fadeInLeft animate__fast",children:"Datos Generales"}),(0,i.jsx)("button",{onClick:function(){localStorage.removeItem("datosGenerales"),m((0,r.QK)())},children:"Actualizar"}),(0,i.jsx)("hr",{}),(0,i.jsxs)("div",{className:"d-flex flex-wrap justify-content-center animate__animated animate__bounce animate__fadeInLeft animate__fast",children:[(0,i.jsxs)("div",{className:"col d-flex flex-column justify-content-center card-dashboard bg-gradient1 mx-2 mb-5 p-3",children:[(0,i.jsx)("p",{className:"col-12 text-start h2",children:null!==x&&void 0!==x&&x.total?x.total:"0"}),(0,i.jsx)("p",{className:"col-12 text-start",children:"Facturas cargadas"})]}),(0,i.jsxs)("div",{className:"col d-flex flex-column justify-content-center card-dashboard bg-gradient2 mx-2 mb-5 p-3",children:[(0,i.jsxs)("p",{className:"col-12 text-start h3",children:[(null===x||void 0===x||null===(e=x.producto)||void 0===e?void 0:e.descripcion)||"No existen productos registrados"," (",null===x||void 0===x||null===(a=x.producto)||void 0===a?void 0:a.total,")"]}),(0,i.jsx)("p",{className:"col-12 text-start",children:"Producto m\xe1s comprado"})]}),(0,i.jsxs)("div",{className:"col d-flex flex-column justify-content-center card-dashboard bg-gradient3 mx-2 mb-5 p-3",children:[(0,i.jsx)("p",{className:"col-12 text-start h3",children:(null===x||void 0===x||null===(t=x.establecimiento)||void 0===t?void 0:t.razonSocial)||"No existen establecimientos registrados"}),(0,i.jsx)("p",{className:"col-12 text-start",children:"Establecimiento m\xe1s visitado"})]}),(0,i.jsxs)("div",{className:"col d-flex flex-column justify-content-center card-dashboard bg-gradient4 mx-5 mb-5 p-3",children:[(0,i.jsxs)("p",{className:"col-12 text-start h3",children:["$ ",Math.round(null===x||void 0===x||null===(d=x.totalGastado)||void 0===d?void 0:d.gastoTotal)||"0.00"]}),(0,i.jsx)("p",{className:"col-12 text-start",children:"Total gastado"})]}),(0,i.jsx)("div",{className:"col-12 d-flex justify-content-center",children:f||b?(0,i.jsxs)("div",{className:"ml-5 sk-chase",children:[(0,i.jsx)("div",{className:"sk-chase-dot"}),(0,i.jsx)("div",{className:"sk-chase-dot"}),(0,i.jsx)("div",{className:"sk-chase-dot"}),(0,i.jsx)("div",{className:"sk-chase-dot"}),(0,i.jsx)("div",{className:"sk-chase-dot"}),(0,i.jsx)("div",{className:"sk-chase-dot"})]}):(0,i.jsxs)("div",{className:" col-8 card-dashboard bg-dark",children:[(0,i.jsx)("h3",{className:"text-dark text-center text-white bg-dark",children:"Gasto por a\xf1os"}),(0,i.jsx)(l.x1,{datasetIdKey:"id",options:{animations:{tension:{duration:1e3,easing:"ease",from:.2,to:.4,loop:!1}},scales:{grid:{color:"white"},x:{grid:{color:"#494949e9",borderWidth:1}},y:{grid:{color:"#494949e9",borderWidth:1}}},layout:{padding:40}},data:{labels:null===g||void 0===g?void 0:g.labels,datasets:null===g||void 0===g||null===(u=g.years)||void 0===u?void 0:u.map((function(e,a){return{label:"".concat(e),data:null===g||void 0===g?void 0:g["".concat(e)],backgroundColor:[c.o[a]],borderColor:[c.o[a]],borderWidth:1}}))},plugins:[{id:"custom_canvas_background_color",beforeDraw:function(e){var a=e.canvas.getContext("2d");a.save(),a.globalCompositeOperation="destination-over",a.fillStyle="#212529",a.fillRect(0,0,e.width,e.height),a.restore()}}]})]})})]})]})}}}]);
//# sourceMappingURL=370.1c02b18b.chunk.js.map